# Build image
docker build -t openai .

# Run it, mounting the .env file safely
docker run --env-file .env openai

# Run the docker compose file
docker compose up --build

# stop all the existed container
docker container prune -f

#run the new setup
wsl docker compose up --build

#down the docker 
docker compose down


# View real-time logs
docker compose logs -f chatgpt_web_ui

# View last 50 lines
docker compose logs --tail=50 chatgpt_web_ui

# View MySQL logs
docker compose logs -f rag_chat_mysql



# Start/restart
wsl docker compose up --build -d

# Check status
wsl docker compose ps

# View logs
wsl docker compose logs -f

# Stop
wsl docker compose down


# Connect to MySQL container
wsl docker exec -it rag_chat_mysql mysql -u chatuser -p
# When prompted, enter password: chatpassword


# Enter the MySQL container
wsl docker exec -it rag_chat_mysql bash

# Then connect to MySQL
mysql -u chatuser -p
# Enter password: chatpassword


-- Show all databases
SHOW DATABASES;

-- Use the RAG chat database
USE rag_chat_db;

-- Show all tables
SHOW TABLES;

-- View sessions table
SELECT * FROM sessions;

-- View messages table
SELECT * FROM messages;

-- View embeddings table (if exists)
SELECT * FROM embeddings;

-- Show table structure
DESCRIBE sessions;
DESCRIBE messages;

-- Count records
SELECT COUNT(*) FROM sessions;
SELECT COUNT(*) FROM messages;

-- Recent messages
SELECT * FROM messages ORDER BY timestamp DESC LIMIT 10;

-- Exit MySQL
EXIT;
